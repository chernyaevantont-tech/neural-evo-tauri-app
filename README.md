# Neural Network Architecture Visual Editor

Визуальный SVG редактор для создания и редактирования архитектур нейронных сетей в рамках системы эволюционного поиска.

## Возможности

### ✨ Настройка параметров нод
- **Полная настройка при создании**: каждая нода создается с настраиваемыми параметрами через модальное окно
- **Редактирование существующих нод**: изменение параметров с автоматическим пересозданием экземпляра
- **Восстановление связей**: при редактировании все совместимые связи автоматически восстанавливаются
- **Валидация параметров**: проверка корректности введенных значений

### Типы нод (слоев)

**Слои (Layers):**
- **Input** - входной слой
  - Параметры: d1 (обязательно), d2 (опционально), d3 (опционально)
  - Пример: 28x28x3 для RGB изображений
- **Dense** - полносвязный слой
  - Параметры: units (количество нейронов), activation (relu/leaky_relu/softmax), use_bias
  - Пример: 128 нейронов с ReLU активацией
- **Conv2D** - сверточный слой
  - Параметры: filters, kernel_size (h, w), stride, padding, dilation, use_bias
  - Пример: 32 фильтра, ядро 3x3, stride=1, padding=1
- **Pooling** - слой пулинга
  - Параметры: pool_type (max/avg), kernel_size (h, w), stride, padding
  - Пример: max pooling 2x2, stride=2

**Merge ноды:**
- **Add** - сложение тензоров (для residual connections)
- **Concat2D** - конкатенация по каналам

## Использование

### Добавление нод
1. Нажмите на кнопку добавления слоя (например, `+ Dense`)
2. Откроется модальное окно настройки параметров
3. Настройте нужные параметры
4. Нажмите **Create** для создания ноды

### Редактирование нод
1. Выберите ноду кликом
2. Нажмите кнопку **Edit Node** в панели инструментов
3. Измените параметры в модальном окне
4. Нажмите **Update**
5. Создастся новый экземпляр класса с новыми параметрами
6. Все совместимые связи автоматически восстановятся

### Перемещение нод
Кликните на ноду и перетащите ее в нужное место на холсте.

### Соединение нод
1. Зажмите клавишу **Shift**
2. Кликните на исходную ноду (от которой идет соединение)
3. Кликните на целевую ноду (к которой идет соединение)

Система автоматически проверит совместимость нод используя метод `CheckCompability`. Если ноды несовместимы, появится предупреждение.

### Просмотр информации о ноде
Кликните на ноду для выбора. В правой панели отобразится:
- Тип ноды
- Параметры слоя
- Входная и выходная форма (shape)
- ID ноды

Информация берется из метода `GetInfo()` выбранной ноды.

### Удаление ноды
1. Выберите ноду кликом
2. Нажмите кнопку **Delete Node** в левой панели

### Справка
Нажмите кнопку **?** в правом верхнем углу для быстрой справки по управлению.

## Правила соединения

### Для обычных слоев (Input, Dense, Conv2D, Pooling)
- Автоматически рассчитывается выходная форма на основе входной
- Метод `CalculateOutputShape()` вызывается при создании соединения

### Для Add Node
- Требует одинаковую форму входных тензоров
- Проверка: `inputShape == nodeOutputShape`

### Для Concat2D Node
- Требует одинаковые высоту и ширину (H, W)
- Суммирует количество каналов (C)
- Проверка: `inputShape[0] == nodeOutputShape[0] && inputShape[1] == nodeOutputShape[1]`

## Архитектура компонентов

```
src/components/
├── types.ts               # Типы для визуальных нод и соединений
├── NodeRenderer.tsx       # Компонент отрисовки отдельной ноды
├── ConnectionRenderer.tsx # Компонент отрисовки соединений
├── NetworkEditor.tsx      # Главный компонент редактора
├── NodeInfoPanel.tsx      # Панель информации о выбранной ноде
├── NodeConfigPanel.tsx    # Панель настройки параметров нод
└── HelpPanel.tsx          # Панель быстрой справки
```

## Запуск приложения

```bash
npm run dev
```

Для сборки desktop приложения:
```bash
npm run tauri dev
```

## Будущие улучшения

- [v] Редактирование параметров нод через UI
- [ ] Сохранение и загрузка архитектур
- [ ] Валидация архитектуры (проверка на циклы, изолированные ноды)
- [ ] Экспорт в код (Python/Keras/PyTorch)
- [ ] Визуализация ресурсов (RAM, Flash, MACs) для выбранной архитектуры
- [ ] Отмена/повтор действий (Undo/Redo)
- [v] Зум и панорамирование холста
- [ ] Автоматическая компоновка графа
